# VCampus 管理员开发指南

## 📋 管理员概述

管理员是VCampus系统中的高级用户，负责不同模块的管理和维护工作。

## 🔐 管理员角色定义

根据 `Role.java`枚举和 `AdminViewController.java`的实现，系统定义了以下管理员角色：

### 角色编码与对应界面

- **用户管理员 (3)**: 用户ID以 `3` 开头 → `/fxml/admin/UserAdminView.fxml`
- **学籍管理员 (4)**: 用户ID以 `4` 开头 → `/fxml/admin/StudentAdminView.fxml`
- **教务管理员 (5)**: 用户ID以 `5` 开头 → `/fxml/admin/CourseAdminView.fxml`
- **图书馆管理员 (6)**: 用户ID以 `6` 开头 → `/fxml/admin/LibraryAdminView.fxml`
- **商店管理员 (7)**: 用户ID以 `7` 开头 → `/fxml/admin/ShopAdminView.fxml`

## 🚀 管理员注册方式（请在database的db文件夹下的user.csv文件查看自己的信息，我已经给你们设置好了）

### 1. 数据库直接注册

在数据库初始化时自动创建：（所有管理员已经创建好了）

```sql
-- 默认管理员账户
INSERT INTO vcampus_db.tb_user (userId, password) VALUES
('3456789', '9876543');  -- 用户管理员
```

### 2. 通过现有管理员注册

1. 使用现有用户管理员账户登录
2. 进入"用户管理" → "创建用户"
3. 填写新管理员信息：
   - 用户ID: `3xxxxxx` 到 `7xxxxxx`
   - 密码: 设置安全密码
4. 点击"创建用户"

### 3. 手动数据库注册

直接在MySQL中执行：

```sql
-- 创建新管理员
INSERT INTO vcampus_db.tb_user (userId, password) VALUES
('3000001', 'admin123'),  -- 用户管理员
('4000002', 'student456'),  -- 学籍管理员
('5000003', 'course789');  -- 教务管理员
```

## 🏠 管理员登录流程

## ⚠️ 开发注意事项

### 1. 角色验证（基于Role.java）

```java
// 使用Role枚举验证管理员角色
public boolean isAdmin(String userId) {
    try {
        Role role = Role.fromUserId(userId);
        return role.getCode() >= 3; // 3-7都是管理员
    } catch (IllegalArgumentException e) {
        return false;
    }
}

// 获取管理员类型
public Role getAdminRole(String userId) {
    try {
        return Role.fromUserId(userId);
    } catch (IllegalArgumentException e) {
        return null;
    }
}
```

### 2. 界面加载逻辑（基于AdminViewController.java），这个文件在客户端的controller里

```java
// 根据用户角色加载相应的管理员内容
private void loadAdminContent() {
    UserSession userSession = MainApp.getGlobalUserSession();
    if (userSession.isLoggedIn()) {
        String userId = userSession.getCurrentUserId();
        String firstChar = userId.substring(0, 1);
  
        String contentPath;
        switch (firstChar) {
            case "3": // 用户管理员
                contentPath = "/fxml/admin/UserAdminView.fxml";
                break;
            case "4": // 学籍管理员
                contentPath = "/fxml/admin/StudentAdminView.fxml";
                break;
            case "5": // 教务管理员
                contentPath = "/fxml/admin/CourseAdminView.fxml";
                break;
            case "6": // 图书馆管理员
                contentPath = "/fxml/admin/LibraryAdminView.fxml";
                break;
            case "7": // 商店管理员
                contentPath = "/fxml/admin/ShopAdminView.fxml";
                break;
            default: // 默认管理员
                contentPath = "/fxml/admin/UserAdminView.fxml";
                break;
        }
  
        loadView(contentPath);
    }
}
```

### 3. 用户ID验证

```java
// 验证管理员ID格式
public boolean validateAdminId(String userId) {
    if (userId == null || userId.length() != 7) {
        return false;
    }
  
    // 检查是否为纯数字
    if (!userId.matches("\\d{7}")) {
        return false;
    }
  
    // 检查首位是否为3-7（管理员范围）
    char firstChar = userId.charAt(0);
    return firstChar >= '3' && firstChar <= '7';
}
```
