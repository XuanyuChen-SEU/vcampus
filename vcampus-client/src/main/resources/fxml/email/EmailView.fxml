<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import java.net.URL?>

<BorderPane fx:id="rootPane" prefHeight="600.0" prefWidth="1000.0" styleClass="email-background"
            xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.vcampus.client.controller.EmailController">
    <stylesheets>
        <URL value="@../../css/EmailView.css" />
    </stylesheets>

    <!-- é¡¶éƒ¨å·¥å…·æ  -->
    <top>
        <HBox alignment="CENTER_LEFT" prefHeight="60.0" spacing="15.0" styleClass="email-toolbar">
            <padding>
                <Insets bottom="10.0" left="20.0" right="20.0" top="10.0" />
            </padding>
            <children>
                <!-- é‚®ä»¶ç³»ç»Ÿæ ‡é¢˜ -->
                <Label text="ðŸ“§ é‚®ä»¶ç³»ç»Ÿ" styleClass="email-title">
                    <font>
                        <Font name="System Bold" size="20.0" />
                    </font>
                </Label>

                <!-- æœç´¢æ¡† -->
                <TextField fx:id="searchField" onAction="#handleSearch" promptText="æŒ‰ä¸»é¢˜æœç´¢é‚®ä»¶..." 
                          styleClass="email-search-field" HBox.hgrow="ALWAYS" />

                <!-- åˆ†éš”ç¬¦ -->
                <Region HBox.hgrow="ALWAYS" />

                <!-- æ“ä½œæŒ‰é’® -->
                <Button fx:id="composeButton" onAction="#handleComposeEmail" text="âœï¸ å†™é‚®ä»¶" 
                        styleClass="email-action-button" />
                <Button fx:id="refreshButton" onAction="#handleRefresh" text="ðŸ”„ åˆ·æ–°" 
                        styleClass="email-action-button" />
            </children>
        </HBox>
    </top>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <center>
        <SplitPane fx:id="mainSplitPane" dividerPositions="0.3" styleClass="email-split-pane">
            
            <!-- å·¦ä¾§ï¼šé‚®ä»¶åˆ—è¡¨åŒºåŸŸ -->
            <items>
                <VBox fx:id="emailListContainer" prefWidth="300.0" styleClass="email-list-container">
                    
                    <!-- é‚®ä»¶åˆ†ç±»æ ‡ç­¾é¡µ -->
                    <HBox alignment="CENTER_LEFT" spacing="0.0" styleClass="email-tabs">
                        <children>
                            <Button fx:id="inboxTab" onAction="#handleInboxTab" text="ðŸ“¥ æ”¶ä»¶ç®±" 
                                    styleClass="email-tab-button, email-tab-active" />
                            <Button fx:id="sentTab" onAction="#handleSentTab" text="ðŸ“¤ å‘ä»¶ç®±" 
                                    styleClass="email-tab-button" />
                            <Button fx:id="draftTab" onAction="#handleDraftTab" text="ðŸ“ è‰ç¨¿ç®±" 
                                    styleClass="email-tab-button" />
                        </children>
                    </HBox>

                    <!-- é‚®ä»¶åˆ—è¡¨ -->
                    <TableView fx:id="emailTable" styleClass="email-table">
                        <columns>
                            <TableColumn fx:id="senderColumn" prefWidth="25.0" text="å‘ä»¶äºº" />
                            <TableColumn fx:id="subjectColumn" prefWidth="45.0" text="ä¸»é¢˜" />
                            <TableColumn fx:id="timeColumn" prefWidth="20.0" text="æ—¶é—´" />
                            <TableColumn fx:id="statusColumn" prefWidth="10.0" text="çŠ¶æ€" />
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                        </columnResizePolicy>
                    </TableView>

                    <!-- åˆ†é¡µæŽ§åˆ¶ -->
                    <HBox alignment="CENTER" spacing="10.0" styleClass="email-pagination">
                        <children>
                            <Button fx:id="prevPageButton" onAction="#handlePrevPage" text="â—€ ä¸Šä¸€é¡µ" 
                                    styleClass="email-page-button" />
                            <Label fx:id="pageInfoLabel" text="ç¬¬ 1 é¡µ" styleClass="email-page-info" />
                            <Button fx:id="nextPageButton" onAction="#handleNextPage" text="ä¸‹ä¸€é¡µ â–¶" 
                                    styleClass="email-page-button" />
                        </children>
                    </HBox>
                </VBox>

                <!-- å³ä¾§ï¼šé‚®ä»¶è¯¦æƒ…åŒºåŸŸ -->
                <VBox fx:id="emailDetailContainer" prefWidth="700.0" styleClass="email-detail-container">
                    
                    <!-- é‚®ä»¶è¯¦æƒ…å¤´éƒ¨ -->
                    <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="email-detail-header">
                        <padding>
                            <Insets bottom="10.0" left="15.0" right="15.0" top="10.0" />
                        </padding>
                        <children>
                            <Label fx:id="detailSubjectLabel" text="è¯·é€‰æ‹©ä¸€å°é‚®ä»¶æŸ¥çœ‹è¯¦æƒ…" 
                                   styleClass="email-detail-subject" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Button fx:id="markReadButton" onAction="#handleMarkAsRead" text="âœ“ æ ‡è®°å·²è¯»" 
                                    styleClass="email-detail-button" visible="false" />
                            <Button fx:id="markUnreadButton" onAction="#handleMarkAsUnread" text="âœ— æ ‡è®°æœªè¯»" 
                                    styleClass="email-detail-button" visible="false" />
                            <Button fx:id="continueComposeButton" onAction="#handleContinueCompose" text="âœï¸ ç»§ç»­ç¼–å†™" 
                                    styleClass="email-detail-button" visible="false" />
                            <Button fx:id="deleteButton" onAction="#handleDeleteEmail" text="ðŸ—‘ï¸ åˆ é™¤" 
                                    styleClass="email-detail-button, email-delete-button" visible="false" />
                            <Button fx:id="replyButton" onAction="#handleReplyEmail" text="â†©ï¸ å›žå¤" 
                                    styleClass="email-detail-button" visible="false" />
                        </children>
                    </HBox>

                    <!-- é‚®ä»¶è¯¦æƒ…å†…å®¹ -->
                    <ScrollPane fx:id="emailDetailScrollPane" fitToWidth="true" styleClass="email-detail-scroll">
                        <content>
                            <VBox fx:id="emailDetailContent" spacing="10.0" styleClass="email-detail-content">
                                <padding>
                                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                </padding>
                                <children>
                                    <!-- é‚®ä»¶åŸºæœ¬ä¿¡æ¯ -->
                                    <HBox alignment="CENTER_LEFT" spacing="20.0" styleClass="email-info-row">
                                        <children>
                                            <Label text="å‘ä»¶äºº:" styleClass="email-info-label" />
                                            <Label fx:id="detailSenderLabel" text="" styleClass="email-info-value" />
                                        </children>
                                    </HBox>
                                    <HBox alignment="CENTER_LEFT" spacing="20.0" styleClass="email-info-row">
                                        <children>
                                            <Label text="æ”¶ä»¶äºº:" styleClass="email-info-label" />
                                            <Label fx:id="detailRecipientLabel" text="" styleClass="email-info-value" />
                                        </children>
                                    </HBox>
                                    <HBox alignment="CENTER_LEFT" spacing="20.0" styleClass="email-info-row">
                                        <children>
                                            <Label text="å‘é€æ—¶é—´:" styleClass="email-info-label" />
                                            <Label fx:id="detailTimeLabel" text="" styleClass="email-info-value" />
                                        </children>
                                    </HBox>
                                    <HBox alignment="CENTER_LEFT" spacing="20.0" styleClass="email-info-row">
                                        <children>
                                            <Label text="çŠ¶æ€:" styleClass="email-info-label" />
                                            <Label fx:id="detailStatusLabel" text="" styleClass="email-info-value" />
                                        </children>
                                    </HBox>

                                    <!-- åˆ†éš”çº¿ -->
                                    <Region prefHeight="10.0" />

                                    <!-- é‚®ä»¶å†…å®¹ -->
                                    <Label text="é‚®ä»¶å†…å®¹:" styleClass="email-content-label" />
                                    <ScrollPane fx:id="emailContentScrollPane" fitToWidth="true" 
                                               prefHeight="300.0" styleClass="email-content-scroll">
                                        <content>
                                            <Label fx:id="detailContentLabel" text="" 
                                                   styleClass="email-content-text" wrapText="true" />
                                        </content>
                                    </ScrollPane>
                                </children>
                            </VBox>
                        </content>
                    </ScrollPane>
                </VBox>
            </items>
        </SplitPane>
    </center>

    <!-- åº•éƒ¨çŠ¶æ€æ  -->
    <bottom>
        <HBox alignment="CENTER_LEFT" prefHeight="30.0" styleClass="email-status-bar">
            <padding>
                <Insets bottom="5.0" left="20.0" right="20.0" top="5.0" />
            </padding>
            <children>
                <Region HBox.hgrow="ALWAYS" />
                <Label fx:id="unreadCountLabel" text="æœªè¯»é‚®ä»¶: 0" styleClass="email-unread-count" />
            </children>
        </HBox>
    </bottom>
</BorderPane>