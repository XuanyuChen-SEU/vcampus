# 数据库管理服务 (DBService)

这是一个基于 Java 的命令行数据库管理工具，它提供了一个交互式的菜单，让用户可以轻松地连接到数据库并执行常见的数据库操作。该工具旨在简化数据表的管理，包括记录的增删查改和表结构的动态修改。

## 核心功能

* **记录管理**：添加、删除、按指定字段搜索以及分页查看表中的所有记录。
* **表结构管理**：动态地为数据表添加新的列或删除不再需要的列。
* **灵活的连接配置**：在程序运行时，可以随时切换当前操作的数据表，甚至更换整个数据库连接配置（URL、用户名、密码）。
* **信息查看**：方便地查看当前数据表的结构或列出数据库中所有的表名。
* **启动验证**：在启动时会严格验证数据库连接和初始表的存在性，确保后续操作的稳定和有效。

## 文件结构说明

* `vcampus-server/src/main/java/com/vcampus/server/service/DBService.java`
    * **数据库服务接口**：这是项目的主要入口和交互层。它包含了 `main` 方法和用户操作的交互式菜单逻辑。
* `com/vcampus/database/service/BaseDBManager.java`
    * **数据库底层服务**：这里封装了所有核心的数据库连接和操作（JDBC），为上层服务提供了通用、稳定的数据访问能力。
* `vcampus-database/src/main/java/com/vcampus/database/service/Test_DBManager.java`
    * **测试程序**：该文件用于未来对底层数据库服务进行代码改进、功能测试和性能调优。**请勿删除**。

## 使用指南

### 1. 准备工作

* **Java 环境**：确保您的系统已经安装了 Java 开发环境 (JDK)。
* **数据库和数据表**：在使用本工具前，请务必确保您的数据库已经创建好，并且至少有一张需要操作的数据表。

### 2. 启动与初始化 (关键步骤)


`DBService`为数据库接口类 。
`Main`为展示功能代码。
`使用流程：(务必进行初始化）`。
* `DBService dbService = new DBService();dbService.initialize();`
需要根据命令行提示，依次输入以下信息：

1.  **数据库URL** (例如: `jdbc:mysql://localhost:3306/test?useSSL=false&serverTimezone=UTC`)
2.  **数据库用户名**
3.  **数据库密码**
4.  **要操作的初始表名**
5. 

> **注意**：程序会验证您输入信息的正确性。只有当连接成功且表存在时，才能进入下一步。

* **`void initialize()` (添加记录)**
    * 需在提示框输入 数据库URL 用户名 数据库密码 要使用的表的名称
（务必要在使用前创建好数据库相关数据文件，后续会添加备份数据库数据文件，添加数据库选择功能，而非现在的字段必写机制）

## 功能接口详解
* 使用前请务必scanner scanner = new Scanner(System.in); 然后进行传参

* `showInteractiveMenu` 
    * 展示使用菜单，详情操作可参考视频
* **`addRecordInteractive` （添加相应字段的数据）**
    * 程序会列出当前表的所有字段，并提示您依次为每个字段输入内容。
    * 先输入字段  再输入相应格式的内容
* **`searchRecordInteractive` (搜索记录)**
    * 先输入您想搜索的**字段名**（例如 `Name`），然后输入要匹配的**内容**（例如 `张三`）。程序将返回所有
    * 匹配的记录。
    * List<Map<String, Object>> results即为搜索到的数据的所有信息
* **`viewAllRecords` (查看所有记录)**
    * 分页展示当前表中的所有数据，支持翻页操作，方便浏览大量数据。
* **`addColumnInteractive` (添加列)**
    * 为当前表添加一个新列。需要您指定列名、数据类型和其它属性（如是否允许为空、默认值等）。
* **`deleteColumnInteractive` (删除列)**
    * 从当前表中删除一个指定的列。程序会显示所有列供您选择，并要求二次确认以防误操作。
* **`switchTableName` (切换数据表)**
    * 在同一个数据库连接下，切换到另一张表进行操作。
    * 输入表的名字，进行切换
* **`switchDatabaseConfig` (切换数据库配置)**
    * 更换当前的数据库连接，可以连接到完全不同的数据库实例。
    * 输入URL
    * 输入 用户名
    * 输入 密码


